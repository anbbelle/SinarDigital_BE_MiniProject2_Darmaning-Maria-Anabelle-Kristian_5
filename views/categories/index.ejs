<!DOCTYPE html>
<html>
<head>
  <title>Categories</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
</head>
<body class="bg-light">
  <nav class="navbar navbar-dark bg-primary">
    <div class="container">
      <a class="navbar-brand" href="/"><i class="bi bi-shop"></i> Product Management</a>
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="/products">Products</a></li>
        <li class="nav-item"><a class="nav-link active" href="/categories">Categories</a></li>
      </ul>
    </div>
  </nav>

  <div class="container my-4">
    <div class="d-flex justify-content-between mb-4">
      <h2><i class="bi bi-tags"></i> Categories</h2>
      <a href="/categories/create" class="btn btn-primary"><i class="bi bi-plus-circle"></i> Add</a>
    </div>

    <div class="card">
      <table class="table table-hover m-0">
        <thead class="table-primary">
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Description</th>
            <th>Products</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% categories.forEach(cat => { %>
            <tr>
              <td><%= cat.id %></td>
              <td><strong><%= cat.name %></strong></td>
              <td><%= cat.description || '-' %></td>
              <td><span class="badge bg-info"><%= cat._count.products %></span></td>
              <td>
                <a href="/categories/<%= cat.id %>/edit" class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i></a>
                <form method="POST" action="/categories/<%= cat.id %>?_method=DELETE" class="d-inline" onsubmit="return confirm('Delete?')">
                  <button class="btn btn-sm btn-outline-danger" <%= cat._count.products > 0 ? 'disabled' : '' %>><i class="bi bi-trash"></i></button>
                </form>
              </td>
            </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
  </div>
</body>
</html>